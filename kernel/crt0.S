//
// Copyright (C) 2023 GreenWaves Technologies, ETH Zurich and University of Bologna
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

//
// Authors: Germain Haugou (germain.haugou@gmail.com)
//

    .section .text_static
    .global _start
    .type   _start, @function
_start:
    // Stack initialization
    la    x2, stack

    // Work-around to cancel call-stack generated by rom on some architectures
    // to not show it in profiler
    la    t0, _start_call_stack_reset_0
    jr    t0
_start_call_stack_reset_0:

    // Do all other initializations from C code
    la    t0, __pi_init_start
    addi  a0, x0, 0
    jalr  x1, t0

    .size   _start, . - _start
